(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-329885dc"],{"4e6e":function(e,t,a){},"58d3":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"派出所名称"}},[a("el-input",{attrs:{placeholder:"请设置派出所名称"},model:{value:e.form.policeStationName,callback:function(t){e.$set(e.form,"policeStationName",t)},expression:"form.policeStationName"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"所属地区"}},[a("el-input",{attrs:{placeholder:"请选择"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"已选择路口"}},e._l(e.selectedRoadArray,(function(t,o){return a("div",{key:t.crossingName,staticClass:"selectedRoad"},[e._v(e._s(t.crossingName)),a("i",{staticClass:"selectedRoadClear el-icon-circle-close",on:{click:function(t){return e.removeSelectedRoad(o)}}})])})),0)],1)],1),a("el-form",{ref:"form",staticClass:"roadposition_form",attrs:{model:e.searchform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"路口名称"}},[a("el-input",{attrs:{placeholder:"请输入路口名称查找"},model:{value:e.searchform.crossingName,callback:function(t){e.$set(e.searchform,"crossingName",t)},expression:"searchform.crossingName"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",loading:e.listLoading},on:{click:e.onSearch}},[e._v("搜索")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"600px"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{key:t.row.crossingId,staticClass:"selectRow-checkbox",attrs:{checked:(e.multipleSelection[t.row.crossingId]||{}).value||!1},on:{change:function(a){return e.handleSelectionChange(a,t.row)}}})]}}])}),a("el-table-column",{attrs:{prop:"crossingName",label:"路口名称"}}),a("el-table-column",{attrs:{prop:"crossingPointNum",label:"路口方位数"}})],1),a("div",{staticClass:"table_pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.paginationTotal,"page-size":10},on:{"current-change":e.currentChange}})],1),a("div",{staticClass:"savebtn"},[a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.doSubmit}},[e._v("设置派出所完成")])],1)],1)},i=[],s=(a("4160"),a("d81d"),a("a434"),a("159b"),a("5530")),n=a("b775"),r={data:function(){return{listLoading:!1,saveLoading:!1,tableData:[],currentPage:1,paginationTotal:0,multipleSelection:{},selectedRoadArray:[],form:{policeStationName:""},searchform:{},searchData:{}}},mounted:function(){var e=this,t=this.$route.query,a=t.policeStationId,o=t.crossingName,i=t.crossingId;this.getTableData(1),a?n["a"].get("/api/policestations/".concat(a)).then((function(t){var a=t.data,o=a.policeStationName,i=a.policeStationId,s=a.crossingData;e.policeStationId=i,e.form.policeStationName=o,s&&s.length>0&&(e.selectedRoadArray=s,s.forEach((function(t){e.multipleSelection[t.policeStationId]={value:!0,policeStationId:t.policeStationId,policeStationName:t.policeStationName}})))})).catch((function(t){e.$message.error(t.response.data.returnMessage||"获取数据异常")})):o&&(this.selectedRoadArray=[{crossingId:i,crossingName:o}],this.multipleSelection[i]={value:!0,crossingId:i,crossingName:o})},methods:{getTableData:function(e){var t=this;this.listLoading=!0,n["a"].post("/api/crossings/search",Object(s["a"])({pageNo:e,pageSize:10,type:2},this.searchData)).then((function(e){t.listLoading=!1,t.tableData=e.data.data,t.paginationTotal=e.data.totalCount})).catch((function(){t.listLoading=!1,t.$message({message:"获取数据异常",type:"error"})}))},currentChange:function(e){this.getTableData(e)},onSearch:function(){this.searchData=this.searchform,this.getTableData(1)},handleSelectionChange:function(e,t){for(var a in this.multipleSelection[t.crossingId]||(this.multipleSelection[t.crossingId]={}),Object.assign(this.multipleSelection[t.crossingId],Object(s["a"])({value:e},t)),this.selectedRoadArray=[],this.multipleSelection){var o=this.multipleSelection[a]||{},i=o.crossingId,n=o.crossingName,r=o.value;r&&this.selectedRoadArray.push({crossingId:i,crossingName:n})}},removeSelectedRoad:function(e){var t=this,a=this.selectedRoadArray[e].crossingId;this.selectedRoadArray.splice(e,1),this.multipleSelection[a].value=!1;var o=this.tableData;this.tableData=[],setTimeout((function(){t.tableData=o}))},doSubmit:function(){var e=this,t=this.form.policeStationName;if(t)if(this.selectedRoadArray.length<=0)this.$message.error("请先选择路口");else{var a=this.selectedRoadArray.map((function(e){var t=e.crossingId;return t})),o={};o=this.policeStationId?{policeStationId:this.policeStationId,crossingId:a}:{policeStationName:t,crossingId:a},this.saveLoading=!0,n["a"].post("/api/policestation",o).then((function(t){e.saveLoading=!1,e.$message({message:"操作成功",type:"success",duration:1e3,onClose:function(){location.reload()}})})).catch((function(t){e.saveLoading=!1,e.$message.error(t.response.data.returnMessage||"操作失败")}))}else this.$message.error("请先输入派出所名称")}}},l=r,c=(a("a1e7"),a("2877")),d=Object(c["a"])(l,o,i,!1,null,"e6212828",null);t["default"]=d.exports},a1e7:function(e,t,a){"use strict";var o=a("4e6e"),i=a.n(o);i.a},a434:function(e,t,a){"use strict";var o=a("23e7"),i=a("23cb"),s=a("a691"),n=a("50c4"),r=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),u=a("ae40"),m=d("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,h=Math.min,f=9007199254740991,b="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!m||!p},{splice:function(e,t){var a,o,d,u,m,p,v=r(this),S=n(v.length),y=i(e,S),N=arguments.length;if(0===N?a=o=0:1===N?(a=0,o=S-y):(a=N-2,o=h(g(s(t),0),S-y)),S+a-o>f)throw TypeError(b);for(d=l(v,o),u=0;u<o;u++)m=y+u,m in v&&c(d,u,v[m]);if(d.length=o,a<o){for(u=y;u<S-o;u++)m=u+o,p=u+a,m in v?v[p]=v[m]:delete v[p];for(u=S;u>S-o+a;u--)delete v[u-1]}else if(a>o)for(u=S-o;u>y;u--)m=u+o-1,p=u+a-1,m in v?v[p]=v[m]:delete v[p];for(u=0;u<a;u++)v[u+y]=arguments[u+2];return v.length=S-o+a,d}})}}]);