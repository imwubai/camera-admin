(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54ba31f9"],{"37ac":function(e,t,a){},"55cd":function(e,t,a){"use strict";var o=a("37ac"),s=a.n(o);s.a},"58d3":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"派出所名称"}},[a("el-input",{attrs:{placeholder:"请设置派出所名称"},model:{value:e.form.policeStationName,callback:function(t){e.$set(e.form,"policeStationName",t)},expression:"form.policeStationName"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"所属地区"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.regionName,attrs:{label:e.regionName,value:e.regionName}})})),1)],1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"已选择路口"}},e._l(e.selectedRoadArray,(function(t,o){return a("div",{key:t.crossingName,staticClass:"selectedRoad"},[e._v(e._s(t.crossingName)),a("i",{staticClass:"selectedRoadClear el-icon-circle-close",on:{click:function(t){return e.removeSelectedRoad(o)}}})])})),0)],1)],1),a("el-form",{ref:"form",staticClass:"roadposition_form",attrs:{model:e.searchform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"路口名称"}},[a("el-input",{attrs:{placeholder:"请输入路口名称查找"},model:{value:e.searchform.crossingName,callback:function(t){e.$set(e.searchform,"crossingName",t)},expression:"searchform.crossingName"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",loading:e.listLoading},on:{click:e.onSearch}},[e._v("搜索")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"600px"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{key:t.row.crossingId,staticClass:"selectRow-checkbox",attrs:{checked:(e.multipleSelection[t.row.crossingId]||{}).value||!1},on:{change:function(a){return e.handleSelectionChange(a,t.row)}}})]}}])}),a("el-table-column",{attrs:{prop:"crossingName",label:"路口名称"}}),a("el-table-column",{attrs:{prop:"crossingPointNum",label:"路口方位数"}})],1),a("div",{staticClass:"table_pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.paginationTotal,"page-size":10},on:{"current-change":e.currentChange}})],1),a("div",{staticClass:"savebtn"},[a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.doSubmit}},[e._v("设置派出所完成")])],1)],1)},s=[],i=(a("4160"),a("d81d"),a("a434"),a("159b"),a("5530")),n=a("b775"),r={data:function(){return{listLoading:!1,saveLoading:!1,tableData:[],currentPage:1,paginationTotal:0,multipleSelection:{},selectedRoadArray:[],statusOptions:[],form:{policeStationName:"",region:""},searchform:{},searchData:{}}},mounted:function(){var e=this,t=this.$route.query,a=t.policeStationId,o=t.crossingName,s=t.crossingId;this.getTableData(1),n["a"].get("/api/regions").then((function(t){e.statusOptions=t.data})).catch((function(){e.$message.error("获取所属地区失败")})),a?n["a"].get("/api/policestations/".concat(a)).then((function(t){var a=t.data,o=a.policeStationName,s=a.policeStationId,i=a.crossingData,n=a.region;e.policeStationId=s,e.form.policeStationName=o,e.form.region=n,i&&i.length>0&&(e.selectedRoadArray=i,i.forEach((function(t){e.multipleSelection[t.crossingId]={value:!0,crossingId:t.crossingId,crossingName:t.crossingName}})))})).catch((function(t){e.$message.error(t.response.data.returnMessage||"获取数据异常")})):o&&(this.selectedRoadArray=[{crossingId:s,crossingName:o}],this.multipleSelection[s]={value:!0,crossingId:s,crossingName:o})},methods:{getTableData:function(e){var t=this;this.listLoading=!0,n["a"].post("/api/crossings/search",Object(i["a"])({pageNo:e,pageSize:10,type:2,policeStationName:"无"},this.searchData)).then((function(e){t.listLoading=!1,t.tableData=e.data.data,t.paginationTotal=e.data.totalCount})).catch((function(e){t.listLoading=!1,t.$message.error(e.response.data.returnMessage||"获取数据异常")}))},currentChange:function(e){this.getTableData(e)},onSearch:function(){this.searchData=this.searchform,this.getTableData(1)},handleSelectionChange:function(e,t){for(var a in this.multipleSelection[t.crossingId]||(this.multipleSelection[t.crossingId]={}),Object.assign(this.multipleSelection[t.crossingId],Object(i["a"])({value:e},t)),this.selectedRoadArray=[],this.multipleSelection){var o=this.multipleSelection[a]||{},s=o.crossingId,n=o.crossingName,r=o.value;r&&this.selectedRoadArray.push({crossingId:s,crossingName:n})}},removeSelectedRoad:function(e){var t=this,a=this.selectedRoadArray[e].crossingId;this.selectedRoadArray.splice(e,1),this.multipleSelection[a].value=!1;var o=this.tableData;this.tableData=[],setTimeout((function(){t.tableData=o}))},doSubmit:function(){var e=this,t=this.form,a=t.policeStationName,o=t.region;if(a)if(o)if(this.selectedRoadArray.length<=0)this.$message.error("请先选择路口");else{var s=this.selectedRoadArray.map((function(e){var t=e.crossingId;return t}));this.saveLoading=!0,this.policeStationId?n["a"].put("/api/policestations",{policeStationId:this.policeStationId,region:o,crossingId:s}).then((function(t){e.saveLoading=!1,e.$message({message:"操作成功",type:"success",duration:1e3,onClose:function(){location.reload()}})})).catch((function(t){e.saveLoading=!1,e.$message.error(t.response.data.returnMessage||"操作失败")})):n["a"].post("/api/policestation",{policeStationName:a,region:o,crossingId:s}).then((function(t){e.saveLoading=!1,e.$message({message:"操作成功",type:"success",duration:1e3,onClose:function(){location.reload()}})})).catch((function(t){e.saveLoading=!1,e.$message.error(t.response.data.returnMessage||"操作失败")}))}else this.$message.error("请先选择所属地区");else this.$message.error("请先输入派出所名称")}}},l=r,c=(a("55cd"),a("2877")),d=Object(c["a"])(l,o,s,!1,null,"5caac63e",null);t["default"]=d.exports},a434:function(e,t,a){"use strict";var o=a("23e7"),s=a("23cb"),i=a("a691"),n=a("50c4"),r=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),g=a("ae40"),u=d("splice"),m=g("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,f=9007199254740991,b="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u||!m},{splice:function(e,t){var a,o,d,g,u,m,v=r(this),S=n(v.length),N=s(e,S),y=arguments.length;if(0===y?a=o=0:1===y?(a=0,o=S-N):(a=y-2,o=h(p(i(t),0),S-N)),S+a-o>f)throw TypeError(b);for(d=l(v,o),g=0;g<o;g++)u=N+g,u in v&&c(d,g,v[u]);if(d.length=o,a<o){for(g=N;g<S-o;g++)u=g+o,m=g+a,u in v?v[m]=v[u]:delete v[m];for(g=S;g>S-o+a;g--)delete v[g-1]}else if(a>o)for(g=S-o;g>N;g--)u=g+o-1,m=g+a-1,u in v?v[m]=v[u]:delete v[m];for(g=0;g<a;g++)v[g+N]=arguments[g+2];return v.length=S-o+a,d}})}}]);