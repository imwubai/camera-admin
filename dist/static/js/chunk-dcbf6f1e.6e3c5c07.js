(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dcbf6f1e"],{"45b3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",staticClass:"roadposition_form",attrs:{model:t.form,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"中队名称"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.policeStationName,callback:function(e){t.$set(t.form,"policeStationName",e)},expression:"form.policeStationName"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"负责路口名称"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.crossingName,callback:function(e){t.$set(t.form,"crossingName",e)},expression:"form.crossingName"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"所属地区"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t.regionName,attrs:{label:t.regionName,value:t.regionName}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",loading:t.listLoading},on:{click:t.onSearch}},[t._v("搜索")])],1)],1)],1),a("el-row",{staticClass:"btns_box"},[a("el-button",{on:{click:function(e){return t.handleClick("add")}}},[t._v("新建")]),a("el-button",{on:{click:function(e){return t.handleClick("update")}}},[t._v("修改")]),a("el-button",{on:{click:t.handleClickDel}},[t._v("删除")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{staticClass:"selectRow-radio",attrs:{label:e.row.policeStationId,value:t.selectedRowKey},on:{change:function(a){return t.handleSelectRow(e.row.policeStationId)}}})]}}])}),a("el-table-column",{attrs:{prop:"policeStationName",label:"中队名称"}}),a("el-table-column",{attrs:{prop:"region",label:"所属地区"}}),a("el-table-column",{attrs:{prop:"crossingName",label:"负责路口名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.crossingData.length>0?a("div",[t._v(t._s(t.renderCrossingName(e.row.crossingData)))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"crossingPointNum",label:"路口数"}})],1),a("div",{staticClass:"table_pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.paginationTotal,"page-size":10},on:{"current-change":t.currentChange}})],1)],1)},o=[],i=(a("4de4"),a("a15b"),a("d81d"),a("5530")),r=a("b775"),s={data:function(){return{statusOptions:[],listLoading:!1,currentPage:1,paginationTotal:0,selectedRowKey:null,tableData:[],form:{},searchData:{}}},mounted:function(){var t=this;this.getTableData(1),r["a"].get("/api/regions").then((function(e){t.statusOptions=e.data,t.statusOptions.unshift({regionId:0,regionName:"全部"})})).catch((function(){t.$message.error("获取所属地区失败")}))},methods:{renderCrossingName:function(t){var e=t.map((function(t){var e=t.crossingName;return e}));return e.join("、")},handleSelectRow:function(t){this.selectedRowKey=t},getTableData:function(t){var e=this;this.listLoading=!0,"全部"===this.searchData.region&&delete this.searchData.region,r["a"].post("/api/policestations/search",Object(i["a"])({pageNo:t,pageSize:10},this.searchData)).then((function(t){e.listLoading=!1,e.tableData=t.data.data,e.paginationTotal=t.data.totalCount})).catch((function(t){e.listLoading=!1,e.$message.error(t.response.data.returnMessage||"获取数据异常")}))},currentChange:function(t){this.getTableData(t)},onSearch:function(){this.searchData=this.form,this.getTableData(1)},handleClick:function(t){var e=this;if("add"===t)this.$router.push({path:"/police/add"});else{if(!this.selectedRowKey)return void this.$message({message:"请先选择一条数据",type:"error"});var a=this.tableData.filter((function(t){return t.policeStationId===e.selectedRowKey}))[0],n=a.policeStationName,o=a.policeStationId;this.$router.push({path:"/police/add",query:{policeStationId:o,policeStationName:n}})}},handleClickDel:function(){var t=this;this.selectedRowKey?this.$alert("确认删除？","系统提示",{confirmButtonText:"确定",callback:function(e){"confirm"===e&&r["a"].delete("/api/policestations/".concat(t.selectedRowKey)).then((function(e){t.$message.success("操作成功"),t.currentPage=1,t.getTableData(1)})).catch((function(e){t.$message.error(e.response.data.returnMessage||"操作失败")}))}}):this.$message({message:"请先选择一条数据",type:"error"})}}},l=s,c=(a("5323"),a("50f2"),a("2877")),u=Object(c["a"])(l,n,o,!1,null,"7c42309a",null);e["default"]=u.exports},"50f2":function(t,e,a){"use strict";var n=a("eb70"),o=a.n(n);o.a},5323:function(t,e,a){"use strict";var n=a("7d2f"),o=a.n(n);o.a},"7d2f":function(t,e,a){},a15b:function(t,e,a){"use strict";var n=a("23e7"),o=a("44ad"),i=a("fc6a"),r=a("a640"),s=[].join,l=o!=Object,c=r("join",",");n({target:"Array",proto:!0,forced:l||!c},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},eb70:function(t,e,a){}}]);