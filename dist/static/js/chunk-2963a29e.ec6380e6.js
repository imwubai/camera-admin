(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2963a29e"],{7227:function(e,t,a){},7707:function(e,t,a){"use strict";var o=a("7227"),r=a.n(o);r.a},"7ea7":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",staticClass:"roadposition_form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{disabled:e.isUpdate,placeholder:"支持中文，英文，数字，以及三种类型组合",maxlength:"20"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"所属派出所",prop:"policeStationId"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.form.policeStationId,callback:function(t){e.$set(e.form,"policeStationId",t)},expression:"form.policeStationId"}},e._l(e.policeStationNameOptions,(function(e){return a("el-option",{key:e.policeStationId,attrs:{label:e.policeStationName,value:e.policeStationId}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"手机号",prop:"telephone"}},[a("el-input",{attrs:{placeholder:"请输入手机号",maxlength:"11"},model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{placeholder:"请输入密码",maxlength:"20"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.doSubmit}},[e._v("保存")])],1)],1)],1)],1)],1)},r=[],s=a("5530"),n=a("b775"),i={data:function(){var e=function(e,t,a){var o=/^[\u4E00-\u9FA5A-Za-z0-9_]+$/;t?o.test(t)?a():a(new Error("输入不合规范")):a(new Error("请输入必填项"))},t=function(e,t,a){t?a():a(new Error("请输入必填项"))},a=function(e,t,a){var o=/^1\d{10}$/;t?o.test(t)?a():a(new Error("手机号输入不合规范")):a()};return{saveLoading:!1,isUpdate:!1,userId:"",formRules:{username:[{required:!0,trigger:"change",validator:e}],telephone:[{trigger:"change",validator:a}],policeStationId:[{required:!0,trigger:"change",validator:t}]},policeStationNameOptions:[],form:{username:"",policeStationId:"",telephone:"",password:""}}},mounted:function(){var e=this,t=this.$route.query,a=t.username,o=t.userId;n["a"].post("/api/policestations/search",{pageNo:1,pageSize:100}).then((function(t){e.policeStationNameOptions=t.data.data})).catch((function(){e.$message({message:"获取派出所数据异常",type:"error"})})),a&&(this.isUpdate=!0,this.userId=o,n["a"].get("/api/users/".concat(o)).then((function(t){var a=t.data,o=a.username,r=a.telephone,s=a.policeStationId;Object.assign(e.form,{username:o,telephone:r,policeStationId:s})})).catch((function(t){e.$message({message:"获取数据异常",type:"error"})})))},methods:{doSubmit:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.saveLoading=!0,e.isUpdate?n["a"].put("/api/users",Object(s["a"])({userId:e.userId},e.form)).then((function(t){e.saveLoading=!1,e.$message({message:"操作成功",type:"success",duration:1e3,onClose:function(){location.reload()}})})).catch((function(t){e.saveLoading=!1,e.$message({message:"操作失败",type:"error"})})):n["a"].post("/api/user",Object(s["a"])(Object(s["a"])({},e.form),{},{type:2})).then((function(t){e.saveLoading=!1,e.$message({message:"操作成功",type:"success",duration:1e3,onClose:function(){location.reload()}})})).catch((function(t){e.saveLoading=!1,e.$message({message:"操作失败",type:"error"})})))}))}}},l=i,c=(a("7707"),a("2877")),p=Object(c["a"])(l,o,r,!1,null,"05a0989c",null);t["default"]=p.exports}}]);